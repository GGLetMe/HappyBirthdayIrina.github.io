<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>–° –î–Ω—ë–º –†–æ–∂–¥–µ–Ω–∏—è!</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Pacifico&display=swap');
    
    :root {
      --primary-color: #ff6ec4;
      --secondary-color: #7873f5;
    }
    
    * {
      box-sizing: border-box;
      touch-action: manipulation;
    }
    
    body {
      margin: 0;
      padding: 20px;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Arial Rounded MT Bold', sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      overflow: hidden;
      text-align: center;
      color: #fff;
      position: relative;
      -webkit-tap-highlight-color: transparent;
    }
    
    h1 {
      font-family: 'Pacifico', cursive;
      font-size: clamp(1.8rem, 8vw, 2.8rem);
      margin: 0 0 15px;
      text-shadow: 2px 4px 8px rgba(0,0,0,0.3);
      animation: fadeInDown 1s ease;
      line-height: 1.2;
    }
    
    .content {
      width: 100%;
      max-width: 400px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    
    .cake-container {
      position: relative;
      width: 180px;
      height: 135px;
      margin: 0.5em auto;
      cursor: pointer;
      animation: fadeInUp 1s ease;
      transition: transform 0.3s;
      z-index: 10;
    }
    
    .cake-container:active {
      transform: scale(0.98);
    }
    
    .cake {
      position: absolute;
      bottom: 0;
      width: 160px;
      height: 70px;
      left: 50%;
      transform: translateX(-50%);
      background: #f9c5d1;
      border-radius: 10px 10px 40px 40px;
      box-shadow: inset -12px 0 #f3a6b7;
    }
    
    .cake:before {
      content: '';
      position: absolute;
      top: -8px;
      left: 0;
      width: 100%;
      height: 25px;
      background: #ffdfe8;
      border-radius: 8px 8px 0 0;
    }
    
    .candle {
      position: absolute;
      top: 15px;
      left: 50%;
      transform: translateX(-50%);
      width: 10px;
      height: 35px;
      background: linear-gradient(to right, #ffd700, #ffec80, #ffd700);
      border-radius: 3px;
      z-index: 2;
      transition: all 0.3s ease;
    }
    
    .flame {
      position: absolute;
      top: -15px;
      left: 50%;
      transform: translateX(-50%);
      width: 12px;
      height: 25px;
      background: linear-gradient(to top, #ff7800, #ffec80);
      border-radius: 50% 50% 20% 20%;
      box-shadow: 0 0 10px #ff7800, 0 0 20px #ffec80;
      animation: flicker 0.8s infinite alternate;
      z-index: 3;
    }
    
    .smoke {
      position: absolute;
      top: -25px;
      left: 50%;
      transform: translateX(-50%);
      width: 4px;
      height: 15px;
      background: #ccc;
      border-radius: 50%;
      opacity: 0;
      z-index: 1;
    }
    
    .instruction {
      margin: 15px 0;
      font-size: clamp(0.9rem, 4vw, 1.1rem);
      color: #fff;
      font-weight: 300;
      animation: pulse 2s infinite;
      padding: 0 15px;
      line-height: 1.4;
    }
    
    .message {
      display: none;
      font-size: clamp(1.2rem, 6vw, 1.5rem);
      margin: 15px 0;
      animation: fadeIn 2s forwards;
      text-shadow: 0 0 10px rgba(0,0,0,0.3);
      padding: 0 15px;
      line-height: 1.3;
    }
    
    .action-btn {
      margin: 10px 0;
      padding: 12px 25px;
      background: rgba(255,255,255,0.2);
      border: 2px solid white;
      border-radius: 30px;
      color: white;
      font-size: clamp(0.9rem, 4vw, 1.1rem);
      cursor: pointer;
      transition: all 0.3s;
      min-width: 200px;
      font-weight: 500;
      outline: none;
    }
    
    .action-btn:hover, .action-btn:active {
      background: rgba(255,255,255,0.3);
      transform: scale(0.98);
    }
    
    .action-btn:focus {
      box-shadow: 0 0 0 3px rgba(255,255,255,0.4);
    }
    
    .balloons {
      position: absolute;
      bottom: -50px;
      width: 100%;
      display: flex;
      justify-content: space-around;
      pointer-events: none;
      z-index: 1;
    }
    
    .balloon {
      width: 50px;
      height: 65px;
      border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
      animation: float 6s infinite ease-in-out;
      box-shadow: inset -3px -4px rgba(0,0,0,0.1);
      opacity: 0.8;
    }
    
    @keyframes fadeInDown {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes flicker {
      0%, 100% { transform: translateX(-50%) scale(1); }
      50% { transform: translateX(-50%) scale(0.9, 1.1); }
    }
    
    @keyframes smoke {
      0% { transform: translateX(-50%) translateY(0) scale(1); opacity: 1; }
      100% { transform: translateX(-50%) translateY(-40px) scale(2.5); opacity: 0; }
    }
    
    @keyframes pulse {
      0% { transform: scale(1); opacity: 0.8; }
      50% { transform: scale(1.05); opacity: 1; }
      100% { transform: scale(1); opacity: 0.8; }
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @keyframes float {
      0% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-150px) rotate(5deg); }
      100% { transform: translateY(0) rotate(0deg); }
    }
    
    canvas {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
    }
    
    /* –ú–æ–±–∏–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ */
    @media (max-width: 480px) {
      .cake-container {
        width: 160px;
        height: 120px;
      }
      
      .cake {
        width: 140px;
        height: 60px;
      }
      
      .action-btn {
        padding: 10px 20px;
        min-width: 180px;
      }
    }
  </style>
</head>
<body>
  <div class="content">
    <h1>–° –î–Ω—ë–º –†–æ–∂–¥–µ–Ω–∏—è! üéâ</h1>
    
    <div class="cake-container" id="cake">
      <div class="cake"></div>
      <div class="candle">
        <div class="flame" id="flame"></div>
        <div class="smoke" id="smoke"></div>
      </div>
    </div>
    
    <p class="instruction">–ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Ç–æ—Ä—Ç —á—Ç–æ–±—ã –∑–∞–¥—É—Ç—å —Å–≤–µ—á—É!</p>
    
    <div class="message" id="message">‚ú® –ü—É—Å—Ç—å —Å–±—É–¥—É—Ç—Å—è –≤—Å–µ –º–µ—á—Ç—ã –∏ –∂–µ–ª–∞–Ω–∏—è! ‚ú®</div>
  </div>

  <div class="balloons">
    <div class="balloon" style="background:#ff4081; animation-delay:0s;"></div>
    <div class="balloon" style="background:#ffd740; animation-delay:1s;"></div>
    <div class="balloon" style="background:#40c4ff; animation-delay:2s;"></div>
  </div>

  <canvas id="confetti"></canvas>

  <script>
    // –≠–ª–µ–º–µ–Ω—Ç—ã
    const cake = document.getElementById('cake');
    const flame = document.getElementById('flame');
    const smoke = document.getElementById('smoke');
    const message = document.getElementById('message');
    const instruction = document.querySelector('.instruction');
    const voiceBtn = document.getElementById('voiceBtn');
    let isCandleLit = true;
    let isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

    // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–¥—É–≤–∞–Ω–∏—è —Å–≤–µ—á–∏
    function blowOutCandle() {
      if (!isCandleLit) return;
      
      isCandleLit = false;
      flame.style.opacity = '0';
      smoke.style.animation = 'smoke 1.5s ease-out forwards';
      message.style.display = 'block';
      launchConfetti();
      instruction.textContent = '–£—Ä–∞! –¢–µ–ø–µ—Ä—å –∑–∞–≥–∞–¥–∞–π—Ç–µ –∂–µ–ª–∞–Ω–∏–µ! ‚ú®';
      voiceBtn.style.display = 'none';
      
      // –í–∏–±—Ä–∞—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)
      if (isMobile && navigator.vibrate) {
        navigator.vibrate([100, 50, 100]);
      }
    }

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ —Ç–æ—Ä—Ç—É
    cake.addEventListener('click', blowOutCandle);
    cake.addEventListener('touchend', blowOutCandle);

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏
    voiceBtn.addEventListener('click', blowOutCandle);
    voiceBtn.addEventListener('touchend', blowOutCandle);

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã - –º–æ–∂–Ω–æ –∑–∞–¥—É—Ç—å –ø—Ä–æ–±–µ–ª–æ–º –∏–ª–∏ Enter
    document.addEventListener('keydown', (e) => {
      if ((e.key === ' ' || e.key === 'Enter') && isCandleLit) {
        blowOutCandle();
      }
    });

    // –ö–æ–Ω—Ñ–µ—Ç—Ç–∏ (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö)
    function launchConfetti() {
      const canvas = document.getElementById('confetti');
      const ctx = canvas.getContext('2d');
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      const confettiPieces = [];
      const colors = ['#ff4081', '#ffd740', '#40c4ff', '#69f0ae', '#ffffff'];
      const confettiCount = isMobile ? 80 : 120; // –ú–µ–Ω—å—à–µ —á–∞—Å—Ç–∏—Ü –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö

      for (let i = 0; i < confettiCount; i++) {
        confettiPieces.push({
          x: Math.random() * canvas.width,
          y: Math.random() * -canvas.height,
          size: Math.random() * 5 + 3,
          color: colors[Math.floor(Math.random() * colors.length)],
          speed: Math.random() * 3 + 2,
          angle: Math.random() * Math.PI * 2,
          rotation: Math.random() * Math.PI * 2,
          rotationSpeed: Math.random() * 0.1 - 0.05
        });
      }

      function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        confettiPieces.forEach(particle => {
          ctx.save();
          ctx.translate(particle.x, particle.y);
          ctx.rotate(particle.rotation);
          
          ctx.fillStyle = particle.color;
          ctx.beginPath();
          ctx.rect(-particle.size/2, -particle.size/2, particle.size, particle.size);
          ctx.fill();
          
          ctx.restore();
          
          particle.y += particle.speed;
          particle.x += Math.sin(particle.angle) * 1.5;
          particle.angle += 0.01;
          particle.rotation += particle.rotationSpeed;
          
          if (particle.y > canvas.height) {
            particle.y = -particle.size;
            particle.x = Math.random() * canvas.width;
          }
        });
        
        requestAnimationFrame(animate);
      }

      animate();

      // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞–Ω–∏–º–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ 8 —Å–µ–∫—É–Ω–¥ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –±–∞—Ç–∞—Ä–µ–∏
      setTimeout(() => {
        canvas.style.opacity = '0';
        setTimeout(() => {
          canvas.width = 0;
          canvas.height = 0;
        }, 500);
      }, 8000);
    }

    // –ê–¥–∞–ø—Ç–∞—Ü–∏—è –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—é —Ä–∞–∑–º–µ—Ä–∞ —ç–∫—Ä–∞–Ω–∞
    window.addEventListener('resize', () => {
      const canvas = document.getElementById('confetti');
      if (canvas) {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      }
    });

    // –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –∞–Ω–∏–º–∞—Ü–∏–π
    window.addEventListener('load', () => {
      // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞
      setTimeout(() => {
        document.body.style.visibility = 'visible';
      }, 100);
    });
    
    // –°–∫—Ä—ã—Ç—å body –¥–æ –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
    document.body.style.visibility = 'hidden';
  </script>
</body>
</html>